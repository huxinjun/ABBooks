<view>

    <view class='account'>

        <image class='account_icon' src="{{account.user_icon}}"></image>

        <view class='account_main'>

            <view class='title_container'>
                <image class='type_icon' src="{{account.icon}}"></image>
                <text class='title'>{{account.name}}</text>
                <text class='tag paid_in'>{{account.paidIn}}元</text>
                <text class='tag inner_group' wx:if="{{account.isPrivate}}">个人账单</text>
                <text class='date'>{{account.date}}</text>
            </view>

            <text class='content'>{{account.description}}</text>



            <text class='all' wx:if="{{account.value.showAllContentBtn}}" bindtap='onShowAllContentClick' data-index='{{index}}'>{{account.value.allContentBtnText}}</text>


            <view class="pics" wx:if="{{account.imgs!=null}}">

                <image class='pic' wx:for="{{account.imgs}}" wx:for-item="img" wx:key="{{index}}" src="{{img}}" mode="aspectFill" data-index="{{index}}" data-accountid="{{account.id}}" bindtap='iconPreview'></image>

            </view>



            <view class='members' wx:if="{{account.members.length>1}}">

                <image class='pull_down' src='/img/pull_down.png' style='{{account.style.membersPullDownTrans}}' bindtap='onMembersPullDownClick' data-index='{{index}}'></image>

                <scroll-view class='simple' scroll-x style='{{account.style.membersSimpleOpacity}}' bindtap='onMembersPullDownClick' data-index='{{index}}'>
                    <image wx:for="{{account.members}}" wx:for-item="member" wx:key="{{index}}" src="{{member.memberIcon}}"></image>
                </scroll-view>

                <view class='detail' style='{{account.style.membersDetailHeight}}'>

                    <view class='full_item' wx:for="{{account.members}}" wx:for-item="member" wx:key="{{index}}">

                        <view class='item'>
                            <image class='icon' src='{{member.memberIcon}}'></image>
                            <text class="should_pay">{{member.memberName}}应付{{member.shouldPay}}元</text>
                            <text class="really_pay" wx:if="{{member.paidIn>0}}">实付{{member.paidIn}}元</text>
                        </view>

                        <view class='childItem' wx:for="{{member.members}}" wx:for-item="childMember" wx:key="{{index}}">

                            <image class='link_line' src='/img/link.png' wx:if="{{index<member.members.length-1}}"></image>
                            <image class='link_line' src='/img/link_end.png' wx:if="{{member.members.length-1==index}}"></image>
                            <image class='icon' src='{{childMember.memberIcon}}'></image>
                            <text class="should_pay">{{childMember.memberName}}应付{{childMember.shouldPay}}元</text>
                            <text class="really_pay" wx:if="{{childMember.paidIn>0}}">实付{{childMember.paidIn}}元</text>

                        </view>
                    </view>





                </view>


                <image class='pay_arrow' src='/img/arrow_up.png' wx:if="{{account.payResult}}"></image>
                <view class='pay' wx:for="{{account.payResult}}" wx:for-item="payResult" wx:key="{{index}}">


                    <view class='item' wx:for="{{payResult.payTarget}}" wx:for-item="target" wx:key="{{index}}">

                        <view class='main'>

                            <image class='p1' src='{{target.paidIcon}}'></image>
                            <image class='pay_to' src='/img/pay_to.png'></image>
                            <image class='p2' src='{{target.receiptIcon}}'></image>
                            <text>支付</text>
                            <text class='money' wx:if="{{target.waitPaidMoney>0}}">{{target.waitPaidMoney}}</text>
                            <text class='money' wx:if="{{target.waitPaidMoney==0}}">{{target.money}}</text>
                            <text>元</text>

                            <text wx:if="{{target.offsetCount>0}}">({{target.offsetCount}}笔账单</text>
                            <text wx:if="{{target.offsetCount>0 && target.offsetMoney==target.money}}">完全抵扣)</text>
                            <text wx:if="{{target.offsetCount>0 && target.offsetMoney!=target.money}}">抵扣了{{target.offsetMoney}}元)</text>

                            <image class='settled' src='/img/account/target_state1.png' wx:if="{{target.waitPaidMoney==0}}"></image>

                            <button wx:if="{{target.value.showBtn}}" bindtap='onPayClick' style="{{target.style.bg}}" data-targetid='{{target.id}}' data-accountid='{{account.id}}'>{{target.value.btnText}}</button>
                        </view>

                        <image class='offset_arrow' src='/img/arrow_up_d9.png' wx:if="{{target.offsets && target.offsets.length>0}}"></image>
                        <view class='offsets'>
                            <view class='offset' wx:for="{{target.offsets}}" wx:for-item="offset" wx:key="{{index}}">
                                    <text>{{offset.date}}</text>
                                    <image class='type_icon' src='{{offset.value.typeIcon}}'></image>
                                    <text>{{offset.value.name}}</text>
                                    <text>{{offset.paidIn}}</text>
                                    <text>元:</text>
                                    <image class='p1' src='{{offset.paidIcon}}' style='margin-left:10rpx;'></image>
                                    <text>向</text>
                                    <image class='p2' src='{{offset.receiptIcon}}'></image>
                                    <text>支付</text>
                                    <text>{{offset.money}}</text>
                            </view>

                        </view>
                    </view>

                </view>

                <text class='addr' wx:if="{{account.addrName!=null}}">{{account.addrName}}</text>
                <text class='time'>{{account.dateDis}}</text>

            </view>



        </view>

    </view>
</view>